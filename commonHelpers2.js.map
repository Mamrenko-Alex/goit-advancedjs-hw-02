{"version":3,"file":"commonHelpers2.js","sources":["../src/js/02-timer.js"],"sourcesContent":["\nimport flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst elements = {\n    buttonStart: document.querySelector('[data-start]'),\n    inputDate: document.querySelector('#datetime-picker'),\n    timerDay: document.querySelector('[data-days]'),\n    timerHours: document.querySelector('[data-hours]'),\n    timerMinutes: document.querySelector('[data-minutes]'),\n    timerSecond: document.querySelector('[data-seconds]'),\n}\n\nelements.buttonStart.disabled = true\n\nfunction convertMs(ms) {\n    // Number of milliseconds per unit of time\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n\n    // Remaining days\n    const days = Math.floor(ms / day);\n    // Remaining hours\n    const hours = Math.floor((ms % day) / hour);\n    // Remaining minutes\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    // Remaining seconds\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n    return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(value) {\n    return value.toString().padStart(2, '0')\n}\n\nlet selectedDate\n\nconst options = {\nenableTime: true,\ntime_24hr: true,\ndefaultDate: new Date(),\nminuteIncrement: 1,\nonClose(selectedDates) {\n    if (selectedDates[0] > new Date()) {\n        elements.buttonStart.disabled = false\n        selectedDate = selectedDates[0];\n    } else {\n        iziToast.error({\n            error: 'Error',\n            message: 'Please choose a date in the future',\n        })\n        elements.buttonStart.disabled = true\n    }\n},\n};\n\nflatpickr(elements.inputDate, options)\n\nelements.buttonStart.addEventListener('click', startTimerHandler)\n\nfunction startTimerHandler() {\n\n    let timeDifferent = selectedDate.getTime() - new Date().getTime();\n    \n    function updateTimer() {\n        elements.buttonStart.disabled = true;\n        elements.inputDate.disabled = true;\n        const currentTime = convertMs(timeDifferent);\n\n        elements.timerDay.textContent = addLeadingZero(currentTime.days);\n        elements.timerHours.textContent = addLeadingZero(currentTime.hours);\n        elements.timerMinutes.textContent = addLeadingZero(currentTime.minutes);\n        elements.timerSecond.textContent = addLeadingZero(currentTime.seconds);\n\n        if (timeDifferent < 0) {\n            elements.inputDate.disabled = false;\n            elements.timerDay.textContent = '00';\n            elements.timerHours.textContent = '00';\n            elements.timerMinutes.textContent = '00';\n            elements.timerSecond.textContent = '00';\n            \n            clearInterval(timerInterval);\n            iziToast.success({\n                title: 'Success',\n                message: 'Countdown finished!',\n            });\n        };\n\n        timeDifferent -= 1000;\n    };\n\n    const timerInterval = setInterval(updateTimer, 1000);\n}\n"],"names":["elements","convertMs","ms","days","hours","minutes","seconds","addLeadingZero","value","selectedDate","options","selectedDates","iziToast","flatpickr","startTimerHandler","timeDifferent","updateTimer","currentTime","timerInterval"],"mappings":"0IAMA,MAAMA,EAAW,CACb,YAAa,SAAS,cAAc,cAAc,EAClD,UAAW,SAAS,cAAc,kBAAkB,EACpD,SAAU,SAAS,cAAc,aAAa,EAC9C,WAAY,SAAS,cAAc,cAAc,EACjD,aAAc,SAAS,cAAc,gBAAgB,EACrD,YAAa,SAAS,cAAc,gBAAgB,CACxD,EAEAA,EAAS,YAAY,SAAW,GAEhC,SAASC,EAAUC,EAAI,CAQnB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CAC1C,CAEA,SAASC,EAAeC,EAAO,CAC3B,OAAOA,EAAM,SAAQ,EAAG,SAAS,EAAG,GAAG,CAC3C,CAEA,IAAIC,EAEJ,MAAMC,EAAU,CAChB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACfA,EAAc,GAAK,IAAI,MACvBX,EAAS,YAAY,SAAW,GAChCS,EAAeE,EAAc,KAE7BC,EAAS,MAAM,CACX,MAAO,QACP,QAAS,oCACrB,CAAS,EACDZ,EAAS,YAAY,SAAW,GAExC,CACA,EAEAa,EAAUb,EAAS,UAAWU,CAAO,EAErCV,EAAS,YAAY,iBAAiB,QAASc,CAAiB,EAEhE,SAASA,GAAoB,CAEzB,IAAIC,EAAgBN,EAAa,QAAO,EAAK,IAAI,KAAI,EAAG,UAExD,SAASO,GAAc,CACnBhB,EAAS,YAAY,SAAW,GAChCA,EAAS,UAAU,SAAW,GAC9B,MAAMiB,EAAchB,EAAUc,CAAa,EAE3Cf,EAAS,SAAS,YAAcO,EAAeU,EAAY,IAAI,EAC/DjB,EAAS,WAAW,YAAcO,EAAeU,EAAY,KAAK,EAClEjB,EAAS,aAAa,YAAcO,EAAeU,EAAY,OAAO,EACtEjB,EAAS,YAAY,YAAcO,EAAeU,EAAY,OAAO,EAEjEF,EAAgB,IAChBf,EAAS,UAAU,SAAW,GAC9BA,EAAS,SAAS,YAAc,KAChCA,EAAS,WAAW,YAAc,KAClCA,EAAS,aAAa,YAAc,KACpCA,EAAS,YAAY,YAAc,KAEnC,cAAckB,CAAa,EAC3BN,EAAS,QAAQ,CACb,MAAO,UACP,QAAS,qBACzB,CAAa,GAGLG,GAAiB,GAEzB,CACI,MAAMG,EAAgB,YAAYF,EAAa,GAAI,CACvD"}